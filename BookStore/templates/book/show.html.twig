{% extends 'base.html.twig' %}

{% block title %}Book{% endblock %}

{% block body %}
    <h1>
        Book Details
        <button class="btn" style ="float:right; color: black;"><a href="{{ path('book_buy') }}" style ="color: black; font-size: 20px;">back to list</a></button>
    </h1>

    <table class="table">
        <tbody>
            <tr>
                <td><img src = "{{ book.image }}"></td>
            </tr>
            <tr>
                <th>Id</th>
                <td>{{ book.id }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ book.title }}</td>
            </tr>
            <tr>
                <th>Author</th>
                <td>{{ book.author }}</td>
            </tr>
            <tr>
                <th>Price</th>
                <td>&euro; {{ book.price }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ book.description }}</td>
            </tr>

        </tbody>
    </table>

    {% if is_granted('ROLE_USER') or is_granted('ROLE_ADMIN')%}
        {% if book.seller != app.user.username %}
            {% if transactions != null %}
                {% if transactions.buyer != app.user.username %}
                    <button class="btn" id = "buy" style ="font-size: 20px; "><a href="{{ path('transaction_new', { 'book': book.id }) }}" style ="color: black; font-size: 20px;">BID</a></button>
                {% else %}
                    <p style ="font-size: 20px; font-family: Segoe Script; ">***You have already bid the book.***</p>
                {% endif %}
            {% else %}
                <button class="btn" id = "buy" style ="font-size: 20px; "><a href="{{ path('transaction_new', { 'book': book.id }) }}" style ="color: black; font-size: 20px;">BID</a></button>
            {% endif %}
        {% else %}
            <p style ="font-size: 20px; font-family: Segoe Script;">***Not Allowed to bid the book.***</p>
        {% endif %}
    {% endif %}
{% endblock %}
